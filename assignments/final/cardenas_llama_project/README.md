## Система рекомендации видеоигр на основе ИИ

### Обзор проекта
Гибридная система рекомендации видеоигр, сочетающая скрипты bash с интеграцией на C++. Система поддерживает переключение между API-инференсом (hurated.com) и локальными моделями, с поддержкой двух языков (английский/русский).

### Возможности
- **Два режима инференса**: API и локальная модель
- **Поддержка двух языков**: Английский и русский
- **История диалога**: Сохраняет контекст между запросами
- **Интеграция на C++**: Использует код AiAgent преподавателя
- **Отказоустойчивость**: C++ клиент → bash клиент → сообщения об ошибках
- **Настраиваемость**: Конфигурация через inference.conf

### Установка и настройка

#### Требования и базовая настройка
1. Скопируйте файлы проекта
2. Дайте права на выполнение: `chmod +x ai_wrapper.sh test.sh`
3. Создайте key.txt с вашим API-ключом: `echo "ваш-api-ключ-здесь" > key.txt`
4. Для локального режима скачайте модель в models/:
   ```bash
   mkdir -p models
   # Скачайте Qwen2.5-0.5B-Instruct-Q6_K.gguf в models/
Примеры использования
Получить рекомендации игр: ./ai_wrapper.sh "Рекомендуй 5 экшен игр"

Задать уточняющий вопрос: ./ai_wrapper.sh "Какие из них доступны на PlayStation?"

Переключение режимов
Переключиться в API режим (по умолчанию): ./ai_wrapper.sh switch api

Переключиться в локальный режим: ./ai_wrapper.sh switch local

Сменить язык:

./ai_wrapper.sh language en (Английский)

./ai_wrapper.sh language ru (Русский)

Команды системы
Показать текущую конфигурацию: ./ai_wrapper.sh config

Показать историю диалога: ./ai_wrapper.sh history

Очистить историю: ./ai_wrapper.sh clear-history

Протестировать API соединение: ./ai_wrapper.sh test ai-api.hurated.com "Привет" "$(cat key.txt)"

Скомпилировать C++ клиент: ./ai_wrapper.sh compile

Показать справку: ./ai_wrapper.sh help

Структура файлов

├── ai_wrapper.sh              # Основной интерфейсный скрипт
├── ai_client.cpp              # Исходный код C++ клиента
├── ai_client                  # Скомпилированный C++ клиент
├── test.sh                    # Bash клиент (резервный)
├── inference.conf             # Файл конфигурации
├── key.txt                    # Хранилище API-ключа
├── config.json                # Пример конфига для C++ клиента
├── prompt.json                # Пример промпта для C++ клиента
├── Makefile                   # Инструкции сборки
├── models/                    # Локальные модели
│   └── Qwen2.5-0.5B-Instruct-Q6_K.gguf
└── src/                       # Исходные файлы на C++
    ├── AiAgent.h
    ├── AiAgent.cpp
    └── main.cpp
Конфигурация (inference.conf)
text
# Источник инференса: local или api
INFERENCE_SOURCE="api"

# Язык: en (английский) или ru (русский)
LANGUAGE="en"

# Локальная конфигурация
LOCAL_MODEL_PATH="models/Qwen2.5-0.5B-Instruct-Q6_K.gguf"
LOCAL_CONTEXT_SIZE=2048
LOCAL_NG_LAYERS=0

# API конфигурация
API_HOST="ai-api.hurated.com"
Компиляция C++ клиента
Способ 1: Использование Makefile
bash
make ai_client
Способ 2: Использование команды обёртки
bash
./ai_wrapper.sh compile
Способ 3: Ручная компиляция
bash
g++ -std=c++17 -O2 -o ai_client ai_client.cpp src/AiAgent.cpp -lssl -lcrypto -I.
Использование C++ клиента напрямую
Автономное использование: ./ai_client <хост> <промпт> [api_ключ]

Пример: ./ai_client ai-api.hurated.com "Рекомендуй игры" "$(cat key.txt)"

Исходные файлы на C++
src/AiAgent.h / src/AiAgent.cpp: Реализация AiAgent преподавателя

ai_client.cpp: Обёртка для интеграции с bash-системой

main.cpp: Пример автономного использования

Что реализовано
1. Интеграция кода AiAgent на C++
Создан ai_client.cpp как обёртка

Компиляция: ./ai_wrapper.sh compile

Откат на bash клиент при недоступности C++

2. Поддержка двух языков
Системные промпты на английском и русском

Переключение: ./ai_wrapper.sh language [en|ru]

Корректная обработка кодировки

3. Гибкая архитектура
Переключение между API и локальным инференсом

Управление историей диалога

Настройка через inference.conf

4. Обработка ошибок
Постепенный откат (C++ → bash → сообщения об ошибках)

Обнаружение ошибок API

Проверка существования файлов

5. Требования выполнены:
Использует код AiAgent на C++ для API-вызовов
Сохраняет оригинальный bash-интерфейс
Поддерживает оба режима (локальный и API)
Контекст/история диалога
Настраиваемая система

Файлы, созданные/изменённые
ai_wrapper.sh - Основной интерфейс (улучшенный)

ai_client.cpp - C++ API клиент

inference.conf - Конфигурация (добавлен LANGUAGE)

test.sh - Bash API клиент (резервный)

Makefile - Инструкции сборки

Демонстрация работы
Очистить историю и начать демо:

bash
./ai_wrapper.sh clear-history
./ai_wrapper.sh language ru
./ai_wrapper.sh switch api
Пример диалога:

bash
./ai_wrapper.sh "Рекомендуй 5 RPG игр"
./ai_wrapper.sh "Какие из них с открытым миром?"
./ai_wrapper.sh history
Устранение неполадок
API возвращает "Bad Request"
Проверьте API ключ в key.txt

Убедитесь, что нет лишних пробелов или переносов строк

Попробуйте английский промпт: ./ai_wrapper.sh language en

Локальный режим не работает
Проверьте наличие модели: ls -lh models/

Установите llama.cpp: brew install llama.cpp

Проверьте путь в inference.conf

C++ клиент не компилируется
Установите зависимости: sudo apt-get install g++ libssl-dev

Проверьте наличие файлов: ls src/AiAgent.*

Используйте bash клиент как временное решение